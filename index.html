<!DOCTYPE html>
<html>
<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <meta property="og:title" content="Квест музея РГБ">
    <meta property="og:description" content="Offering tour packages for individuals or groups.">
    <meta property="og:image" content="http://ogurtsov.me/museum/main.jpg">
    <meta property="og:url" content="http://ogurtsov.me/museum">
    
    <meta name="twitter:title" content="Квест музея РГБ">
    <meta name="twitter:description" content=" Offering tour packages for individuals or groups.">
    <meta name="twitter:image" content=" http://ogurtsov.me/museum/main.jpg">
    <meta name="twitter:card" content="summary_large_image">

</head>

<style>
    .bnw-image {
        -webkit-filter: grayscale(100%) blur(5px);
        filter: grayscale(100% blur(5px));
    }
    
    .question-container .btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        z-index: 2;
    }
</style>

<body>
    <div class="container py-5" id="app">
        <div class="row" id="floor-1" v-if="started && !completed">
            <div class="col-4 m-0 p-0 question-container" v-for="(room, index) in rooms">
                <button class="btn btn-light" @click="openModal(room, index + 1)" v-if="!room.answered">Загадка #{{ index + 1 }}</button>
                <img class="w-100" :src="'images/questions/' + (index + 1)  + '.gif'" :class="[room.answered?'':'bnw-image']">
            </div>
            <div class="col-12 text-center my-5">
                <a class="btn btn-primary btn-lg" href="/museum/">Назад</a>
            </div>
        </div>
        <div class="text-center" v-else-if="completed">
            <h1>Поздравляем!</h1>
            <img class="w-100" src="images/final.jpeg">
            <p class="text-muted">
                Ты справился со всеми заданиями в этом доме и смог разгадать Тайну его обитателей. Как ты уже догадался, это семья Николая II, последнего царя Российской Империи, в 1917 году при захвате власти большевиками она была сослана в Тобольск, а затем расстреляна в Екатеринбурге. Несмотря на все трудности и такой трагичный конец этого семейства, все они - Николай II, Александра Федоровна и их дети - Ольга, Татьяна, Мария, Анастасия и Алексей - очень любили книги и даже в свое последнее путешествие взяли их с собой. Книги сопровождали их в веселые и грустные моменты, каждое поколение передавало свои знания и ценности через свою любимую литературу, и это скрепляло их семейные узы. Даже сейчас, спустя более 100 лет, ты можешь увидеть не только фотографии и письма этой семьи, но и те издания, которые они читали в семейном кругу, и прикоснуться к их истории. 
            </p>
            <div class="col-12 text-center my-5">
                <a class="btn btn-primary btn-lg" href="/museum/">Пройти еще раз</a>
            </div>
            <div class="share-buttons">
                <button class="btn btn-outline-primary"><i class="fa fa-vk mr-1"></i>Поделиться в VK</button>
                <button class="btn btn-outline-primary"><i class="fa fa-facebook mr-1"></i>Поделиться в Facebook</button>
            </div>          
        </div>
        <div id="intro" class="text-center" v-else>
            <h1>Дорогой друг!</h1>
            <img class="w-100" src="images/main.jpg">
            <p class="text-muted">
                Ты оказался в удивительном месте - в Старом доме, где живет множество прекрасных сказок, персонажей, и историй, среди них - история одной семьи. Это Бабушка и Дедушка, Родители и их Дети, и они так же, как и ты, любят играть, узнавать новое, и, конечно, любят книги. Для каждого из них эти книги свои: добрые, прекрасные, грустные, вдохновляющие,захватывающие - наверняка и у тебя есть твоя любимая литература.  Мы предлагаем тебе поближе познакомиться с ними и разгадать их одну большую Тайну. Здесь для тебя зашифровано 9 загадок - 9 предметов, которые тебе нужно будет найти внутри Дома, и эти вещи так или иначе связаны с этими обитателями. Когда ты сможешь найти ответ, просто введи его на экране, и ты отгадаешь один из фрагментов загадки!
            </p>
            <button class="btn btn-primary btn-lg" @click="started = true">Начать квест</button>
        </div>
        <div class="modal" tabindex="-1" role="dialog" data-backdrop="static" id="roomModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">{{ roomInModal.title }}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <img class="img-fluid" :src="'images/modal/' + (roomInModal.index || 1) + '.jpg'" />
                        {{ roomInModal.question }}
                    </div>
                    <div class="modal-footer">
                        <input class="form-control" v-model="roomInModal.answer" placeholder="Ваш ответ"/>
                        <button type="button" class="btn btn-primary" @click="checkAnswer(roomInModal)">Ответить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                started: false,
                completed: true,
                roomInModal: {},
                rooms: [
                {
                    title: 'Гостиная',
                    question: 'С чего начинается этот Дом? С Гостиной -  места, где все члены семьи могут собраться вместе. Видишь, какой здесь большой стол, книжный шкаф, красивые картины? Здесь домочадцы очень любят читать друг другу вслух, рассматривать вместе картинки в книжках и придумывать им продолжение, иногда дети даже сами пишут свои собственные рассказы и рисуют к ним иллюстрации. Когда они были совсем маленькими, их учили читать их родители, показывая им красивые буквы и слова, которые с ними связаны. В этой комнате есть очень красивая книга, с которой у детей начиналась любовь к чтению - они рассматривали картинки-иллюстрации к буквам, например,на букве “а” они видели изображение арапа в ярких цветных одеждах. Найди здесь и ты эту книгу. В твоем путешествии по Дому ты уже наверняка не раз сталкивался с иллюстрациями этой книги, а если нет,то еще наверняка их увидишь. Кто является автором этой книги?',
                    answers: ['бенуа', 'александр бенуа', 'азбука бенуа', 'Александр Бенуа “Азбука Бенуа”'],
                    answered: false
                },
                {
                    title: 'Комната бабушки и дедушки',
                    question: 'Зайди в комнату к Бабушке и Дедушке. Для обитателей этой комнаты книги были всегда источником добра и вечных ценностей, они передавались из поколения в поколения, наставляя и помогая поступать правильно. Здесь также есть книги, которые можно было не только читать, но и познавать окружающий мир, рассматривая картинки. У Бабушки есть множество книг, в том числе и на иностранных языках, но она особенно любит одну из них, изданную в 1815 году- она часто достает ее и листает вместе с внуками, рассматривая там удивительные цветы, растения и животные, некоторые из них даже баснословные (несуществующие), одним словом, ее прочтение может заменить собой целый поход в музей. Как называется эта книга?',
                    answers: ['детский музеум', 'детский музеумъ', 'музеум', 'музеумъ'],
                    answered: false
                },
                {
                    title: 'Комната родителей',
                    question: 'Теперь твой путь лежит в комнату Родителей. Родители очень любят современные книги своего времени, приветствуют в своих детях любознательность и художественное творчество. Они часто покупают своим детям красочные модные книги и рассматривают их все вместе, устраивают чтения вслух. Ты можешь убедиться, что многие из книг, которые находятся в этой комнате, ты уже знаешь - здесь есть и старорусские сказки, и произведения А.С. Пушкина - все с яркими, красивыми иллюстрациями. Найди здесь книгу, в которой повествуется о 33 воинах, которые выходят из воды на зов одного царевича и напиши, о каком царе говорится в ее названии?',
                    answers: ['гвидон', 'царь гвидон'],
                    answered: false
                },
                {
                    title: 'Комната мальчиков',
                    question: 'Какие в комнате Мальчиков могут быть книги? Посмотри, здесь они  на разных языках - французский, русский, немецкий - все потому, что дети того времени с самого детства учили их и могли свободно читать свои любимые книги. Папа часто приносил своему сыну (намек на царевича Алексея) новые книги -  увлекательные, с захватывающим сюжетом, повествующим о далеких странствиях, путешествиях,новых друзьях и подвигах - и они вместе читали их, придумывая подробности будущих открытий. Несмотря на то, что мальчик был болен и не мог отправиться самостоятельно в подобные путешествия, эти чтения позволяли ему увидеть новые города и страны, не выходя из собственного дома. На этой выставке тоже есть такие книги, одна из них прямо сейчас предлагает тебе отправиться в непростое, но увлекательное путешествие - она рассказывает о мальчике, который смог побывать в одном из самых удивительных мест нашей страны. Сможешь найти и написать, куда эта книга предлагает отправиться? Хотел бы ты туда попасть?',
                    answers: ['камчатка', 'в камчатку', 'на камчатку'],
                    answered: false
                },
                {
                    title: 'Комната Девочек',
                    question: 'Давай теперь перейдем в комнату Девочек. Здесь живет четверо маленьких обитательниц этого Дома. Как ты думаешь, какие книги читали Девочки в начале XIX века? Многое из литературы, которая лежит здесь, досталась Девочкам в наследство от мамы - все это прекрасно иллюстрированные, часто от руки, книги, в которых повествуется о дружбе, нежности и заботе о близких. Еще здесь есть книги о домашних питомцах с яркими и красивыми иллюстрациями и смешными историями. Одна из таких книг была издана в Англии в конце XIX-начале XX века, а затем переведена на русский язык. Здесь ты можешь увидеть ее на русском языке, но эта книжка была у девочек также и на английском языке в их собственной маленькой библиотеке. В ней повествуется о маленьких черных проказниках, которые очень любят мурлыкать, пить молоко и иногда лазают по крышам. Ты даже сможешь их увидеть почти в каждой комнате этого Дома - они разбежались, чтобы лучше познакомиться с гостями этого Дома. Кто же это?',
                    answers: ['кошки', 'коты', 'для милых крошек про черных кошек'],
                    answered: false
                },
                {
                    title: 'Комната прислуги',
                    question: 'В этой комнате живут двое девушек: прислуга и гувернантка, которая учит с детьми уроки и преподает им различные предметы. Только взгляни, сколько здесь книг о воспитании детей! Обрати внимание на книгу “Наглядное воспитание”, давай рассмотрим ее поближе. Видишь, сколько внутри нее иллюстраций? Это для того, чтобы взрослым книгу можно было смотреть вместе с детьми, рассказывая и показывая им те или иные предметы и вещи. Посмотри на рисунок внимательно - сможешь ли ты среди предметов найти животное? Напиши, какое это животное. Видел ли ты его когда-нибудь вживую?',
                    answers: ['овца'],
                    answered: false
                },
                {
                    title: 'Веранда',
                    question: 'Скорей же поднимайся на Веранду - чудесное место, где есть множество интересных занятий и игр! Дочери и сын семьи очень любят проводить здесь время вместе с родителями и бабушкой с дедушкой, любоваться удивительными растениями,а вечерами пить чай и слушать истории. Иногда кажется, что здесь можно оказаться в царстве растений и почувствовать себя настоящими маленькими человечками. Сможешь здесь найти книгу, которая описывает такое событие? В царство какого растения она приглашает окунуться?',
                    answers: ['папоротник', 'папоротника'],
                    answered: false
                },
                {
                    title: 'Учебный класс',
                    question: 'Тссс! Давай на цыпочках пройдем в Учебный класс,ведь, кажется, занятия уже начались! Как и сейчас в школе, дети этого Дома занимаются со своими учителями и изучают различные предметы, не только такие, как география или правописание, но еще и изобразительное искусство, музыка и рукоделие. Как ты думаешь, похоже ли их обучение на то, что есть в современных школах? Давай поближе рассмотрим их учебники. СМожешь ли ты найти учебник, по которому дети изучают окружающий мир и природу своей родины? Как он называется?',
                    answers: ['учебник родная природа', 'родная природа'],
                    answered: false
                },
                {
                    title: 'Тайная комната',
                    question: 'Кажется, мы с тобой уже прошли почти все шаги квеста и осталось совсем немного! Пришла пора узнать, кто же все-таки обитает в этом Доме. Давай пройдем в последнюю, Тайную комнату. В 1917 году семья была вынуждена покинуть свой Дом и уехать в ссылку, где им пришлось встретить свое последнее Рождество. Несмотря на все горести, заботливые мама и папа подготовили для своих детей подарки: как ты можешь догадаться, это книги. Родители надписали свои подарки, чтобы дети всегда могли запомнить любовь и заботу, вложенную в эти издания, и даже сейчас, спустя 100 лет после этих событий, ты можешь увидеть эти книги вживую. На одной из них написано про Елку - праздник, который семья отмечала вместе. В каком городе они тогда находились?',
                    answers: ['тобольск'],
                    answered: false
                }
                ]
            },
            methods: {
                openModal(room, index) {
                    this.roomInModal = room;
                    this.$set(this.roomInModal, 'index', index)
                    $('#roomModal').modal('show')
                },
                checkAnswer (room) {
                    if (room.answer && ~room.answers.indexOf(room.answer.toLowerCase())) {
                        room.answered = true;
                        var answeredCount = this.rooms.filter(function(room) { return room.answered }).length
                        console.log(answeredCount, this.rooms.length)
                        
                        if (answeredCount < this.rooms.length) {
                            alert('Правильно! Осталось ответить на ' + (this.rooms.length - answeredCount) + ' загадок!')
                        } else {
                            this.completed = true;
                        }
                        $('#roomModal').modal('hide')
                    } else {
                        alert('Неправильно! Попробуйте еще раз!')
                    }
                }
            }
        })
    </script>
</body>
</html>
